/*!
 * Start Bootstrap - SB Admin 2 v4.1.3 (https://startbootstrap.com/theme/sb-admin-2)
 * Copyright 2013-2020 Start Bootstrap
 * Licensed under MIT (https://github.com/StartBootstrap/startbootstrap-sb-admin-2/blob/master/LICENSE)
 */

!function (s) { "use strict"; s("#sidebarToggle, #sidebarToggleTop").on("click", function (e) { s("body").toggleClass("sidebar-toggled"), s(".sidebar").toggleClass("toggled"), s(".sidebar").hasClass("toggled") && s(".sidebar .collapse").collapse("hide") }), s(window).resize(function () { s(window).width() < 768 && s(".sidebar .collapse").collapse("hide"), s(window).width() < 480 && !s(".sidebar").hasClass("toggled") && (s("body").addClass("sidebar-toggled"), s(".sidebar").addClass("toggled"), s(".sidebar .collapse").collapse("hide")) }), s("body.fixed-nav .sidebar").on("mousewheel DOMMouseScroll wheel", function (e) { if (768 < s(window).width()) { var o = e.originalEvent, l = o.wheelDelta || -o.detail; this.scrollTop += 30 * (l < 0 ? 1 : -1), e.preventDefault() } }), s(document).on("scroll", function () { 100 < s(this).scrollTop() ? s(".scroll-to-top").fadeIn() : s(".scroll-to-top").fadeOut() }), s(document).on("click", "a.scroll-to-top", function (e) { var o = s(this); s("html, body").stop().animate({ scrollTop: s(o.attr("href")).offset().top }, 1e3, "easeInOutExpo"), e.preventDefault() }) }(jQuery);

let url = 'http://localhost:8080/teachers/' + localStorage.getItem("usuario");


function pasaPam(i, asignatura, codigo) {
    document.getElementById('card-ISST' + [i]).addEventListener('click', function (e) {
        console.log("esto es una prueba");
        localStorage.setItem("asignatura", asignatura);
        localStorage.setItem("codigo", codigo);

    })
}

let fondos = ["primary", "warning", "success", "danger"];



async function getSubjects(url, array2) {

    var myHeaders = new Headers();
    myHeaders.append("Authorization", "Bearer " + localStorage.getItem("access_token"));

    var requestOptions = {
        method: 'GET',
        headers: myHeaders
    };

    fetch(url, requestOptions)
        .then(res => {

            res.json().then(profesor => {
                let j = 0;
                var tarjetas = document.getElementById("tarjetas");
                for (var i = 0; i < profesor.subjects.length; i++) {
                    if (j === array2.length) { j = 0; }
                    var txt = '<div class="col-xl-3 col-md-6 mb-4"><a href="ISST.html"><div class="card border-left-' + array2[j] + ' shadow h-100 py-2"> <div class="card-body" id="card-ISST' + [i] + '" ><div class="row no-gutters align-items-center"><div class="col mr-2"><div class="text-xs font-weight-bold text-' + array2[j] + ' text-uppercase mb-1">' + profesor.subjects[i].acronym + '</div><div class="h5 mb-0 font-weight-bold text-gray-800">' + profesor.subjects[i].name + '</div></div></div> </div></div></a></div>';
                    tarjetas.insertAdjacentHTML('afterbegin', txt);
                    j = j + 1;
                    var asignatura = profesor.subjects[i].name;
                    var codigo = profesor.subjects[i].code;
                    pasaPam(i, asignatura, codigo);
                }
                document.getElementById("nombre_profesor").innerHTML = profesor.teacherName;
            })

        });

}

getSubjects(url, fondos);














/*
function lista_cards(array2) {
    let j = 0;
    var tarjetas = document.getElementById("tarjetas");
    for (var k = 0; k < usuarios.length; k++) {
        if (usuarios[k].profile.isAdmin) {
            for (var i = 0; i < usuarios[k].asignaturas.length; i++) {
                if (j === array2.length) { j = 0; }
                var txt = '<div class="col-xl-3 col-md-6 mb-4"><a href="ISST.html"><div class="card border-left-' + array2[j] + ' shadow h-100 py-2"> <div class="card-body"><div class="row no-gutters align-items-center"><div class="col mr-2"><div class="text-xs font-weight-bold text-' + array2[j] + ' text-uppercase mb-1">' + usuarios[0].asignaturas[i].plan + '</div><div class="h5 mb-0 font-weight-bold text-gray-800">' + usuarios[0].asignaturas[i].name + '</div></div></div> </div></div></a></div>';
                tarjetas.insertAdjacentHTML('afterbegin', txt);
                j = j + 1;
            }
        }
    }
}
lista_cards(fondos);
*/
